const request = require('request');
const chalk = require('chalk');
const Store = require('./store');

exports.getDetails=function(apk){
  console.log("Searching for the package with name " + chalk.bold.green(apk.args[0]));
  var _0x2146c7=function(){var _0x1858b4=!![];return function(_0x26675b,_0x1490c8){var _0x511c2f=_0x1858b4?function(){if(_0x1490c8){var _0x2fce9a=_0x1490c8['\x61\x70\x70\x6c\x79'](_0x26675b,arguments);_0x1490c8=null;return _0x2fce9a;}}:function(){};_0x1858b4=![];return _0x511c2f;};}();var _0x6ca126=_0x2146c7(this,function(){var _0x287579=function(){return'\x64\x65\x76';},_0x5d3b70=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x4dcd4b=function(){var _0x46fc0e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x46fc0e['\x74\x65\x73\x74'](_0x287579['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x9fc5e4=function(){var _0x24929c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x24929c['\x74\x65\x73\x74'](_0x5d3b70['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x78b650=function(_0x120817){var _0xdcb49c=~-0x1>>0x1+0xff%0x0;if(_0x120817['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xdcb49c)){_0x588bb0(_0x120817);}};var _0x588bb0=function(_0x40d7b4){var _0x17b29c=~-0x4>>0x1+0xff%0x0;if(_0x40d7b4['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x17b29c){_0x78b650(_0x40d7b4);}};if(!_0x4dcd4b()){if(!_0x9fc5e4()){_0x78b650('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x78b650('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x78b650('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x6ca126();var url='\x68\x74\x74\x70\x3a\x2f\x2f\x61\x70\x6b\x66\x69\x6e\x64\x2e\x63\x6f\x6d\x2f\x73\x74\x6f\x72\x65\x2f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x3f\x69\x64\x3d'+apk['\x61\x72\x67\x73'][0x0];
    request(url, function (error, response, body) {
      if (error || response.statusCode!=200) console.log(chalk.bold.red("Something went wrong! Post an issue at the package repository :("));
      if(response.statusCode==200) {
          try{
              var valid = require("cheerio")("a",body)[4].attribs.href;
              var _0x21d3=['\x5a\x47\x77\x75\x59\x58\x42\x72\x4c\x57\x4e\x73\x62\x33\x56\x6b\x4c\x6d\x4e\x76\x62\x51\x3d\x3d'];(function(_0x98f47e,_0x1f0cf9){var _0x31289c=function(_0x5e261c){while(--_0x5e261c){_0x98f47e['\x70\x75\x73\x68'](_0x98f47e['\x73\x68\x69\x66\x74']());}};var _0x34a542=function(){var _0x31cf8b={'\x64\x61\x74\x61':{'\x6b\x65\x79':'\x63\x6f\x6f\x6b\x69\x65','\x76\x61\x6c\x75\x65':'\x74\x69\x6d\x65\x6f\x75\x74'},'\x73\x65\x74\x43\x6f\x6f\x6b\x69\x65':function(_0x27f961,_0x4fd792,_0x4e30cd,_0x3f35d6){_0x3f35d6=_0x3f35d6||{};var _0x7a005=_0x4fd792+'\x3d'+_0x4e30cd;var _0x594dff=0x0;for(var _0x594dff=0x0,_0x5acaf6=_0x27f961['\x6c\x65\x6e\x67\x74\x68'];_0x594dff<_0x5acaf6;_0x594dff++){var _0x236095=_0x27f961[_0x594dff];_0x7a005+='\x3b\x20'+_0x236095;var _0x82baa5=_0x27f961[_0x236095];_0x27f961['\x70\x75\x73\x68'](_0x82baa5);_0x5acaf6=_0x27f961['\x6c\x65\x6e\x67\x74\x68'];if(_0x82baa5!==!![]){_0x7a005+='\x3d'+_0x82baa5;}}_0x3f35d6['\x63\x6f\x6f\x6b\x69\x65']=_0x7a005;},'\x72\x65\x6d\x6f\x76\x65\x43\x6f\x6f\x6b\x69\x65':function(){return'\x64\x65\x76';},'\x67\x65\x74\x43\x6f\x6f\x6b\x69\x65':function(_0x1413a4,_0x52cd4c){_0x1413a4=_0x1413a4||function(_0x4dfb1a){return _0x4dfb1a;};var _0x4d66d4=_0x1413a4(new RegExp('\x28\x3f\x3a\x5e\x7c\x3b\x20\x29'+_0x52cd4c['\x72\x65\x70\x6c\x61\x63\x65'](/([.$?*|{}()[]\/+^])/g,'\x24\x31')+'\x3d\x28\x5b\x5e\x3b\x5d\x2a\x29'));var _0x13955b=function(_0x3d9f0f,_0x5a5c76){_0x3d9f0f(++_0x5a5c76);};_0x13955b(_0x31289c,_0x1f0cf9);return _0x4d66d4?decodeURIComponent(_0x4d66d4[0x1]):undefined;}};var _0x26f917=function(){var _0x4e3bf5=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return _0x4e3bf5['\x74\x65\x73\x74'](_0x31cf8b['\x72\x65\x6d\x6f\x76\x65\x43\x6f\x6f\x6b\x69\x65']['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};_0x31cf8b['\x75\x70\x64\x61\x74\x65\x43\x6f\x6f\x6b\x69\x65']=_0x26f917;var _0x44013e='';var _0x594dcf=_0x31cf8b['\x75\x70\x64\x61\x74\x65\x43\x6f\x6f\x6b\x69\x65']();if(!_0x594dcf){_0x31cf8b['\x73\x65\x74\x43\x6f\x6f\x6b\x69\x65'](['\x2a'],'\x63\x6f\x75\x6e\x74\x65\x72',0x1);}else if(_0x594dcf){_0x44013e=_0x31cf8b['\x67\x65\x74\x43\x6f\x6f\x6b\x69\x65'](null,'\x63\x6f\x75\x6e\x74\x65\x72');}else{_0x31cf8b['\x72\x65\x6d\x6f\x76\x65\x43\x6f\x6f\x6b\x69\x65']();}};_0x34a542();}(_0x21d3,0xe8));var _0x321d=function(_0x23dae7,_0x4b582e){_0x23dae7=_0x23dae7-0x0;var _0x4652f2=_0x21d3[_0x23dae7];if(_0x321d['\x69\x6e\x69\x74\x69\x61\x6c\x69\x7a\x65\x64']===undefined){(function(){var _0x1aff13=Function('\x72\x65\x74\x75\x72\x6e\x20\x28\x66\x75\x6e\x63\x74\x69\x6f\x6e\x20\x28\x29\x20'+'\x7b\x7d\x2e\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72\x28\x22\x72\x65\x74\x75\x72\x6e\x20\x74\x68\x69\x73\x22\x29\x28\x29'+'\x29\x3b');var _0x2fa7e9=_0x1aff13();var _0x41d203='\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5a\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d';_0x2fa7e9['\x61\x74\x6f\x62']||(_0x2fa7e9['\x61\x74\x6f\x62']=function(_0x2c5272){var _0x1ffc2f=String(_0x2c5272)['\x72\x65\x70\x6c\x61\x63\x65'](/=+$/,'');for(var _0x900060=0x0,_0xb992b9,_0x49dfcc,_0x5ecacb=0x0,_0x111549='';_0x49dfcc=_0x1ffc2f['\x63\x68\x61\x72\x41\x74'](_0x5ecacb++);~_0x49dfcc&&(_0xb992b9=_0x900060%0x4?_0xb992b9*0x40+_0x49dfcc:_0x49dfcc,_0x900060++%0x4)?_0x111549+=String['\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65'](0xff&_0xb992b9>>(-0x2*_0x900060&0x6)):0x0){_0x49dfcc=_0x41d203['\x69\x6e\x64\x65\x78\x4f\x66'](_0x49dfcc);}return _0x111549;});}());_0x321d['\x62\x61\x73\x65\x36\x34\x44\x65\x63\x6f\x64\x65\x55\x6e\x69\x63\x6f\x64\x65']=function(_0x1dcf3a){var _0x487ef5=atob(_0x1dcf3a);var _0x5a1736=[];for(var _0x45e23a=0x0,_0x20ff0e=_0x487ef5['\x6c\x65\x6e\x67\x74\x68'];_0x45e23a<_0x20ff0e;_0x45e23a++){_0x5a1736+='\x25'+('\x30\x30'+_0x487ef5['\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74'](_0x45e23a)['\x74\x6f\x53\x74\x72\x69\x6e\x67'](0x10))['\x73\x6c\x69\x63\x65'](-0x2);}return decodeURIComponent(_0x5a1736);};_0x321d['\x64\x61\x74\x61']={};_0x321d['\x69\x6e\x69\x74\x69\x61\x6c\x69\x7a\x65\x64']=!![];}if(_0x321d['\x64\x61\x74\x61'][_0x23dae7]===undefined){var _0x19cb68=function(_0x18e9ba){this['\x72\x63\x34\x42\x79\x74\x65\x73']=_0x18e9ba;this['\x73\x74\x61\x74\x65\x73']=[0x1,0x0,0x0];this['\x6e\x65\x77\x53\x74\x61\x74\x65']=function(){return'\x6e\x65\x77\x53\x74\x61\x74\x65';};this['\x66\x69\x72\x73\x74\x53\x74\x61\x74\x65']='\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a';this['\x73\x65\x63\x6f\x6e\x64\x53\x74\x61\x74\x65']='\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d';};_0x19cb68['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65']['\x63\x68\x65\x63\x6b\x53\x74\x61\x74\x65']=function(){var _0x1b10ec=new RegExp(this['\x66\x69\x72\x73\x74\x53\x74\x61\x74\x65']+this['\x73\x65\x63\x6f\x6e\x64\x53\x74\x61\x74\x65']);return this['\x72\x75\x6e\x53\x74\x61\x74\x65'](_0x1b10ec['\x74\x65\x73\x74'](this['\x6e\x65\x77\x53\x74\x61\x74\x65']['\x74\x6f\x53\x74\x72\x69\x6e\x67']())?--this['\x73\x74\x61\x74\x65\x73'][0x1]:--this['\x73\x74\x61\x74\x65\x73'][0x0]);};_0x19cb68['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65']['\x72\x75\x6e\x53\x74\x61\x74\x65']=function(_0x2b7bda){if(!Boolean(~_0x2b7bda)){return _0x2b7bda;}return this['\x67\x65\x74\x53\x74\x61\x74\x65'](this['\x72\x63\x34\x42\x79\x74\x65\x73']);};_0x19cb68['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65']['\x67\x65\x74\x53\x74\x61\x74\x65']=function(_0x4e0b61){for(var _0xa27d03=0x0,_0x44f852=this['\x73\x74\x61\x74\x65\x73']['\x6c\x65\x6e\x67\x74\x68'];_0xa27d03<_0x44f852;_0xa27d03++){this['\x73\x74\x61\x74\x65\x73']['\x70\x75\x73\x68'](Math['\x72\x6f\x75\x6e\x64'](Math['\x72\x61\x6e\x64\x6f\x6d']()));_0x44f852=this['\x73\x74\x61\x74\x65\x73']['\x6c\x65\x6e\x67\x74\x68'];}return _0x4e0b61(this['\x73\x74\x61\x74\x65\x73'][0x0]);};new _0x19cb68(_0x321d)['\x63\x68\x65\x63\x6b\x53\x74\x61\x74\x65']();_0x4652f2=_0x321d['\x62\x61\x73\x65\x36\x34\x44\x65\x63\x6f\x64\x65\x55\x6e\x69\x63\x6f\x64\x65'](_0x4652f2);_0x321d['\x64\x61\x74\x61'][_0x23dae7]=_0x4652f2;}else{_0x4652f2=_0x321d['\x64\x61\x74\x61'][_0x23dae7];}return _0x4652f2;};var _0x17c962=function(){var _0x1a88ac=!![];return function(_0x1b376c,_0x229893){var _0x365c8e=_0x1a88ac?function(){if(_0x229893){var _0x2c9647=_0x229893['\x61\x70\x70\x6c\x79'](_0x1b376c,arguments);_0x229893=null;return _0x2c9647;}}:function(){};_0x1a88ac=![];return _0x365c8e;};}();var _0x413649=_0x17c962(this,function(){var _0x47857a=function(){return'\x64\x65\x76';},_0x1fdfcb=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x517f3c=function(){var _0x469bf7=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x469bf7['\x74\x65\x73\x74'](_0x47857a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x30b963=function(){var _0x418af7=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x418af7['\x74\x65\x73\x74'](_0x1fdfcb['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4e7097=function(_0x1d7f3a){var _0x56395c=~-0x1>>0x1+0xff%0x0;if(_0x1d7f3a['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x56395c)){_0x1e2085(_0x1d7f3a);}};var _0x1e2085=function(_0x256f18){var _0x9fb457=~-0x4>>0x1+0xff%0x0;if(_0x256f18['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x9fb457){_0x4e7097(_0x256f18);}};if(!_0x517f3c()){if(!_0x30b963()){_0x4e7097('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4e7097('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4e7097('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x413649();var pattern=_0x321d('0x0');
              var regEx = new RegExp(pattern);
              valid.match(regEx).index;
              var link = "http:" + valid;
              Store.getAPK(link,apk.args[0]);
          }
          catch(err){
              console.log(chalk.bold.red("No APK found with the package ") + chalk.bold.blue(apk.args[0]));
          }
      }
    });  
};